---
title: 'Tasks'
description: 'Manage and retrieve tasks in your platform'
---

# Tasks API

The Tasks API allows you to manage and retrieve tasks in your Unpod platform. Tasks represent individual execution units within a run or space.

<Note>
**Prerequisites:** Make sure you have your API Token. See [Authentication](/api/get-started/authentication) for details.
</Note>

---

## Create a Task in a Space

Create a new task inside a given space using the space's public token. You can assign the task to a pilot/agent, attach multiple documents, provide additional context, and optionally schedule the execution.

```http
POST /api/v2/platform/spaces/{space_token}/tasks/
```

### Path Parameters

| Name        | Type   | Required | Description                                    |
|-------------|--------|----------|------------------------------------------------|
| space_token | string | Yes      | Public token of the space where task is created |

<Note>
You can get the `space_token` by hitting the [Get All Spaces](/api/space/spaces#get-all-spaces) API. The `token` field in the response is your Space Token.
</Note>

### Headers

| Name          | Type   | Required | Description                     |
|---------------|--------|----------|---------------------------------|
| Authorization | string | Yes      | API Key format: `Token <token>` |
| Content-Type  | string | Yes      | `application/json`              |

### Request Body

| Field     | Type   | Required | Description                                |
|-----------|--------|----------|--------------------------------------------|
| pilot     | string | Yes      | Agent/pilot handle to assign the task      |
| documents | array  | Yes      | Array of document objects with task data   |
| context   | string | No       | Additional context for the task            |
| schedule  | object | No       | Schedule configuration (type: "now")       |

### Example Request

```http
POST /api/v2/platform/spaces/your-space-token/tasks/
Headers:
  Authorization: Token your-api-token
  Content-Type: application/json

Body:
{
  "pilot": "space-agent-f1o3qjm1y7q1avvuynv4vprb1",
  "documents": [
    {
      "name": "John Doe",
      "time": null,
      "email": "john@example.com",
      "contact_number": "1234567890",
      "alternate_number": "9876543210",
      "occupation": "Developer",
      "company_name": "TechCorp",
      "address": "123/456 Main Street",
      "about": "Software Developer",
      "context": "Follow up call",
      "multi_select": "multi",
      "created": "2025-10-30T05:44:56",
      "labels": ["Interested"],
      "title": "Document Title",
      "description": "Description text",
      "document_id": "6902fb5840a736e125e80ebc"
    }
  ],
  "context": "Call the lead and discuss the project requirements.",
  "schedule": {
    "type": "now"
  }
}
```

### Document Object Fields

| Field            | Type   | Required | Description                       |
|------------------|--------|----------|-----------------------------------|
| name             | string | Yes      | Contact name                      |
| email            | string | No       | Contact email                     |
| contact_number   | string | Yes      | Primary contact number            |
| alternate_number | string | No       | Alternate contact number          |
| occupation       | string | No       | Contact's occupation              |
| company_name     | string | No       | Contact's company                 |
| address          | string | No       | Contact's address                 |
| about            | string | No       | About the contact                 |
| context          | string | No       | Additional context for the call   |
| labels           | array  | No       | Labels/tags for the document      |
| title            | string | No       | Document title                    |
| description      | string | No       | Document description              |
| document_id      | string | No       | Unique document identifier        |

### Success Response (200)

```json
{
    "status_code": 200,
    "message": "Task Created Successfully",
    "data": {
        "run_id": "R74802366fe9011f0878d43cd8a99e069",
        "task_ids": [
            "T74802367fe9011f0878d43cd8a99e069"
        ],
        "status": "pending"
    }
}
```

### Response Fields

| Field       | Type    | Description          |
|-------------|---------|----------------------|
| status_code | integer | HTTP status code     |
| message     | string  | Response message     |
| data        | object  | Created task details |

### Data Object Fields

| Field    | Type   | Description                       |
|----------|--------|-----------------------------------|
| run_id   | string | Created run identifier            |
| task_ids | array  | Array of created task identifiers |
| status   | string | Task status (initially `pending`) |

### Error Response (206 — Validation / Creation Failed)

```json
{
  "message": "Task creation failed",
  "errors": "Detailed error description"
}
```

---

## Get All Agents

Retrieve detailed information for all registered agents, helping you view and manage agent records within the system.

```http
GET /api/v2/platform/agents/
```

### Headers

| Name          | Type   | Required | Description                     |
|---------------|--------|----------|---------------------------------|
| Authorization | string | Yes      | API Key format: `Token <token>` |
| Org-Handle    | string | Yes      | Organization domain handle      |

<Note>
You can get the `Org-Handle` by hitting the [Get All Organizations](/api/space/organizations#get-all-organizations) API. The `domain_handle` field in the response is your Org-Handle.
</Note>

### Example Request

```http
GET /api/v2/platform/agents/
Headers:
  Authorization: Token your-api-token
  Org-Handle: your-org-handle
```

### Success Response (200)

```json
{
  "count": 94,
  "status_code": 200,
  "message": "Agents fetched successfully",
  "data": [
    {
      "handle": "space-agent-8qmk42nslp91wrh3dz7btxc4",
      "name": "General Agentic",
      "type": "Voice",
      "state": "published",
      "description": "Hi,",
      "purpose": ""
    }
  ]
}
```

### Response Fields

| Field       | Type    | Description            |
|-------------|---------|------------------------|
| count       | integer | Total number of agents |
| status_code | integer | HTTP status code       |
| message     | string  | Response message       |
| data        | array   | Array of agent objects |

### Agent Object Fields

| Field       | Type   | Description                                    |
|-------------|--------|------------------------------------------------|
| handle      | string | Unique agent handle/identifier                 |
| name        | string | Agent display name                             |
| type        | string | Agent type: `Voice`, `Chat`, etc.              |
| state       | string | Agent state: `published`, `draft`, `archived`  |
| description | string | Agent description                              |
| purpose     | string | Agent purpose/use case                         |

### Error Response (401 — Unauthorized)

```json
{
  "status_code": 401,
  "message": "Authentication credentials were not provided."
}
```

---

## Get Tasks by Agent Handle

Fetch all tasks assigned to a specific agent/pilot using their handle. This returns full task metadata including user info, input payloads, attachments, and execution details.

```http
GET /api/v2/platform/agents/{handle}/tasks/
```



### Path Parameters

| Name   | Type   | Required | Description                           |
|--------|--------|----------|---------------------------------------|
| handle | string | Yes      | Unique handle/identifier of the agent |

<Note>
The `handle` is the agent handle. You can get it by hitting the [Get All Agents](#get-all-agents) API. The `handle` field in the response is your Agent Handle.
</Note>

### Headers

| Name          | Type   | Required | Description                     |
|---------------|--------|----------|---------------------------------|
| Authorization | string | Yes      | API Key format: `Token <token>` |
| Content-Type  | string | Yes      | `application/json`              |

### Example Request

```http
GET /api/v2/platform/agents/sales-agent-v1/tasks/
Headers:
  Authorization: Token your-api-token
  Content-Type: application/json
```

### Success Response (200)

```json
{
  "count": 1,
  "status_code": 200,
  "message": "Tasks Fetched Successfully",
  "data": [
    {
      "_id": "697debb84c27faa892bfa0cc",
      "thread_id": "675272289779974401",
      "user_org_id": "145",
      "user_info": {
        "email": "user@example.com",
        "full_name": "John Doe"
      },
      "task_id": "T8ff2ccdffe9a11f0878d43cd8a99e069",
      "run_id": "R8ff2ccdefe9a11f0878d43cd8a99e069",
      "collection_ref": "collection_data_SA2W8R6NZRK6C9PO3JSL1J85",
      "task": {
        "objective": "Call it"
      },
      "input": {
        "name": "John Doe",
        "email": "john@example.com",
        "contact_number": "1234567890",
        "alternate_number": "",
        "occupation": "Developer",
        "company_name": "TechCorp",
        "address": "123 Main Street",
        "about": "Software Developer",
        "context": "Follow up call",
        "multi_select": "multi",
        "created": "2025-10-30T05:44:56",
        "labels": [
          "Interested"
        ],
        "document_id": "6902fb5840a736e125e80c",
        "quality": "good"
      },
      "output": {
        "call_id": "675272289779974401",
        "call_end_reason": null,
        "start_time": "2026-01-31 11:47:38.067021",
        "end_time": "2026-01-31 11:48:11.385745",
        "assistant_number": "1234567890",
        "call_summary": "Call completed successfully",
        "duration": 33,
        "recording_url": "https://example.com/recording.ogg",
        "transcript": [
          {
            "role": "user",
            "content": "Hello?",
            "timestamp": "2026-01-31 11:47:46.675013",
            "participant": "idt_+1234567890"
          },
          {
            "role": "assistant",
            "content": "Hi! This is [name] from [company]. Am I speaking with John?\n",
            "timestamp": "2026-01-31 11:47:54.259815",
            "message_id": "2e8be35b-303"
          }
        ],
        "post_call_data": {
          "classification": {
            "labels": ["Interested"]
          },
          "summary": {
            "status": "Connected",
            "summary": "The call was successful and the user showed interest in the product.",
            "callback_datetime": "2026-02-01T10:00:00",
            "hours_from_now": "24"
          },
          "call_back": {
            "scheduled": true,
            "time": "2026-02-01T10:00:00"
          },
          "follow_up": {
            "required": "follow_up enabled"
          },
          "profile_summary": {
            "tone": "Positive",
            "engagement": "High",
            "interest_level": "Very Interested",
            "objections": [],
            "questions_asked": ["What is the pricing?", "When can we start?"],
            "pain_points": ["Current solution is expensive"],
            "outcome": "Interested",
            "next_action": "Schedule demo",
            "callback_requested": true,
            "callback_time": "2026-02-01T10:00:00",
            "summary_text": "The user showed high interest and requested a callback for product demo."
          },
          "structured_data": {
            "lead_score": 8,
            "budget": "$5000-$10000"
          }
        },
        "metadata": {
          "cost": 0.5,
          "usage": {
            "tokens": 150,
            "duration": 33
          }
        },
        "call_type": "outbound",
        "call_status": "completed"
      },
      "attachments": [],
      "assignee": "sales-agent-v1",
      "status": "completed",
      "execution_type": "call",
      "ref_id": "6902fb5840a736e125e80c",
      "failure_count": 0,
      "last_failure_reason": null,
      "retry_attempt": 0,
      "last_status_change": "2026-01-31T11:47:31.198984",
      "scheduled_timestamp": null
    }
  ]
}
```

### Response Fields

| Field       | Type    | Description           |
|-------------|---------|-----------------------|
| count       | integer | Total number of tasks |
| status_code | integer | HTTP status code      |
| message     | string  | Response message      |
| data        | array   | Array of task objects |

### Task Object Fields

| Field                | Type    | Description                                   |
|----------------------|---------|-----------------------------------------------|
| _id                  | string  | Internal task document ID                     |
| thread_id            | string  | Thread identifier                             |
| user_org_id          | string  | Organization ID of the user                   |
| user_info            | object  | User details (email, full_name)               |
| task_id              | string  | Unique task identifier                        |
| run_id               | string  | Parent run identifier                         |
| collection_ref       | string  | Reference to the data collection              |
| task                 | object  | Task definition with objective                |
| input                | object  | Input data for the task                       |
| output               | object  | Task output with call details                 |
| attachments          | array   | List of attachments                           |
| assignee             | string  | Agent handle assigned to the task             |
| status               | string  | Task status: `pending`, `completed`, `failed` |
| execution_type       | string  | Type of execution: `call`, `email`, etc.      |
| ref_id               | string  | Reference ID linking to input data            |
| failure_count        | integer | Number of failed attempts                    |
| last_failure_reason  | string  | Reason for last failure                       |
| retry_attempt        | integer | Current retry attempt number                  |
| last_status_change   | string  | Timestamp of last status change               |
| scheduled_timestamp  | string  | Scheduled execution timestamp                 |

### Error Response (206 — Tasks Fetch Failed)

```json
{
  "message": "Error fetching tasks",
  "errors": "Detailed error description"
}
```

### Error Response (404 — Agent Not Found)

```json
{
  "message": "Agent not found"
}
```

---

## Get Tasks by Space Token

Fetch all tasks for a specific space using the space_token. Supports pagination with page and query parameters for efficient data retrieval.

```http
GET /api/v2/platform/spaces/{space_token}/tasks/
```

### Path Parameters

| Name        | Type   | Required | Description                           |
|-------------|--------|----------|---------------------------------------|
| space_token | string | Yes      | Public token identifying the workspace |

<Note>
You can get the `space_token` by hitting the [Get All Spaces](/api/space/spaces#get-all-spaces) API. The `token` field in the response is your Space Token.
</Note>

### Query Parameters (Optional)

| Name      | Type | Required | Description                        |
|-----------|------|----------|------------------------------------|
| page      | int  | No       | Page number (default = 1)          |
| page_size | int  | No       | Number of tasks per page (default = 20) |

### Headers

| Name          | Type   | Required | Description                     |
|---------------|--------|----------|---------------------------------|
| Authorization | string | Yes      | API Key format: `Token <token>` |
| Content-Type  | string | Yes      | `application/json`              |


### Example Request

```http
GET /api/v2/platform/spaces/your-space-token/tasks/?page=1&page_size=20
Headers:
  Authorization: Token your-api-token
  Content-Type: application/json
```

### Success Response (200)

```json
{
  "count": 2,
  "status_code": 200,
  "message": "Tasks Fetched Successfully",
  "data": [
    {
      "_id": "space_task_id_001",
      "space_id": "999",
      "thread_id": null,
      "user": "456",
      "user_org_id": "789",
      "user_info": {
        "id": "456",
        "email": "sales.manager@company.com",
        "full_name": "Sarah Johnson",
        "user_token": "SPACE_TOKEN_ABC123"
      },
      "created": "2025-01-15T14:30:00.000000",
      "modified": "2025-01-15T14:35:00.000000",
      "task_id": "TASK_SPACE_456789",
      "run_id": "RUN_SPACE_987654",
      "collection_ref": "collection_data_SPACE123456",
      "task": {
        "objective": "Follow up with potential clients for product demo"
      },
      "input": {
        "name": "Rajesh Kumar",
        "contact_number": "+919988776655",
        "email": "rajesh.kumar@techstart.in",
        "address": "Bangalore, Karnataka, India",
        "occupation": "CTO",
        "company_name": "TechStart Solutions",
        "context": "Interested in AI automation tools for their startup. Budget: 50K-1L, Timeline: Q1 2025"
      },
      "output": {
        "call_id": "019aa6a9-809f-7ddb-b110-7a16167cb632",
        "customer": "Cust 1",
        "contact_number": "70000380188",
        "call_end_reason": "customer-ended-call",
        "recording_url": "https://store.unpod.ai/media/private/high-call-recordings/...",
        "transcript": [
          {
            "role": "user",
            "content": "And reason for calling",
            "user_id": "unknown",
            "timestamp": ""
          },
          {
            "role": "assistant",
            "content": "Hello?",
            "user_id": null,
            "timestamp": ""
          }
        ],
        "start_time": "2025-11-21 13:45:20",
        "end_time": "2025-11-21 13:46:36",
        "assistant_number": "+919949883072",
        "call_summary": "An AI representative called regarding the premium project inquiry...",
        "duration": 76.769,
        "cost": 0.139,
        "post_call_data": {
          "classification": {
            "labels": ["Interested"],
            "summary": "The agent called to discuss the project. The user expressed interest."
          },
          "summary": {
            "status": "Call Back",
            "summary": "The call involved an introduction and inquiry about the project.",
            "name": "N/A",
            "contact": "N/A",
            "callback_datetime": "N/A",
            "hours_from_now": "N/A"
          },
          "success_evaluator": "{\"score\": 5, \"reason\": \"...\"}",
          "call_back": null,
          "follow_up": null,
          "structured_data": "{\"customer_name\": null, ...}",
          "webhook_data": null,
          "call_evaluation": []
        },
        "metadata": {
          "cost": 0.139,
          "type": "outboundPhoneCall",
          "usage": {}
        }
      },
      "attachments": [],
      "assignee": "sales-bot-v3",
      "status": "completed",
      "execution_type": "call",
      "ref_id": "lead_doc_456789"
    },
    {
      "_id": "space_task_id_002",
      "space_id": "999",
      "thread_id": null,
      "user": "456",
      "user_org_id": "789",
      "user_info": {
        "id": "456",
        "email": "sales.manager@company.com",
        "full_name": "Sarah Johnson",
        "user_token": "SPACE_TOKEN_ABC123"
      },
      "created": "2025-01-15T13:20:00.000000",
      "modified": "2025-01-15T13:20:00.000000",
      "task_id": "TASK_SPACE_456790",
      "run_id": "RUN_SPACE_987655",
      "collection_ref": "collection_data_SPACE123456",
      "task": {
        "objective": "Payment reminder for invoice #INV-2025-001"
      },
      "input": {
        "name": "Priya Sharma",
        "contact_number": "+919876543210",
        "email": "priya.sharma@business.com",
        "address": "Mumbai, Maharashtra",
        "occupation": "Finance Manager",
        "company_name": "Global Enterprises Ltd",
        "context": "Pending invoice INV-2025-001 amount Rs. 45,000, due date 20th Jan 2025"
      },
      "output": {},
      "attachments": [],
      "assignee": "payment-bot-v1",
      "status": "pending",
      "execution_type": "call",
      "ref_id": "invoice_doc_001"
    }
  ]
}
```

### Response Fields

| Field       | Type    | Description           |
|-------------|---------|-----------------------|
| count       | integer | Total number of tasks |
| status_code | integer | HTTP status code      |
| message     | string  | Response message      |
| data        | array   | Array of task objects |

### Task Object Fields

| Field          | Type    | Description                                   |
|----------------|---------|-----------------------------------------------|
| _id            | string  | Internal task document ID                     |
| space_id       | string  | Space identifier                              |
| thread_id      | string  | Thread identifier (null if not applicable)    |
| user           | string  | User ID who created the task                  |
| user_org_id    | string  | Organization ID of the user                   |
| user_info      | object  | User details (id, email, full_name, token)    |
| created        | string  | Task creation timestamp                       |
| modified       | string  | Last modified timestamp                       |
| task_id        | string  | Unique task identifier                        |
| run_id         | string  | Parent run identifier                         |
| collection_ref | string  | Reference to the data collection              |
| task           | object  | Task definition with objective                |
| input          | object  | Input data for the task                       |
| output         | object  | Task output (empty if pending)                |
| attachments    | array   | List of attachments                           |
| assignee       | string  | Agent handle assigned to the task             |
| status         | string  | Task status: `pending`, `completed`, `failed` |
| execution_type | string  | Type of execution: `call`, `email`, etc.      |
| ref_id         | string  | Reference ID linking to input data            |

### Output Object Fields

| Field            | Type   | Description                              |
|------------------|--------|------------------------------------------|
| call_id          | string | Unique call identifier                   |
| customer         | string | Customer name                            |
| contact_number   | string | Contact phone number                     |
| call_end_reason  | string | Reason for call ending                   |
| recording_url    | string | URL to call recording                    |
| transcript       | array  | Array of conversation messages           |
| start_time       | string | Call start timestamp                     |
| end_time         | string | Call end timestamp                       |
| assistant_number | string | Outbound phone number used               |
| call_summary     | string | AI-generated summary of the call         |
| duration         | number | Call duration in seconds                 |
| cost             | number | Cost of the call in USD                  |
| post_call_data   | object | Post-call analysis data                  |
| metadata         | object | Additional metadata (cost, type, usage)  |

### Error Response (206 — Tasks Fetch Failed)

```json
{
  "message": "Error fetching tasks",
  "errors": "Detailed error description"
}
```

---

## Common Error Codes

| Status Code | Description                                      |
|-------------|--------------------------------------------------|
| 200         | Success - Data fetched/created successfully      |
| 206         | Partial Content - Business logic error occurred  |
| 400         | Bad Request - Invalid parameters provided        |
| 401         | Unauthorized - Invalid or missing API token      |
| 403         | Forbidden - Access denied to the resource        |
| 404         | Not Found - Agent or Space not found             |
| 500         | Internal Server Error - Server-side error        |

## Code Examples

<CodeGroup>

```javascript Node.js
const axios = require('axios');

const headers = {
  'Authorization': 'Token your-api-token',
  'Content-Type': 'application/json'
};

// Get tasks by agent handle
const getTasksByAgent = async (agentHandle) => {
  const response = await axios.get(
    `https://unpod.dev/api/v2/platform/agents/${agentHandle}/tasks/`,
    { headers }
  );
  console.log(`Total tasks: ${response.data.count}`);
  return response.data.data;
};

// Get tasks by space token with pagination
const getTasksBySpace = async (spaceToken, page = 1, pageSize = 20) => {
  const response = await axios.get(
    `https://unpod.dev/api/v2/platform/spaces/${spaceToken}/tasks/?page=${page}&page_size=${pageSize}`,
    { headers }
  );
  console.log(`Total tasks: ${response.data.count}`);
  return response.data.data;
};

// Create a task in a space
const createTask = async (spaceToken, pilot, documents, context) => {
  const response = await axios.post(
    `https://unpod.dev/api/v2/platform/spaces/${spaceToken}/tasks/`,
    {
      pilot,
      documents,
      context,
      schedule: { type: 'now' }
    },
    { headers }
  );
  console.log(`Task created: ${response.data.data.run_id}`);
  return response.data.data;
};

// Example usage
getTasksByAgent('sales-agent-v1');
```

```python Python
import requests

headers = {
    'Authorization': 'Token your-api-token',
    'Content-Type': 'application/json'
}

def get_tasks_by_agent(agent_handle: str):
    """Get tasks by agent handle"""
    url = f'https://unpod.dev/api/v2/platform/agents/{agent_handle}/tasks/'
    response = requests.get(url, headers=headers)
    data = response.json()
    print(f"Total tasks: {data['count']}")
    return data['data']

def get_tasks_by_space(space_token: str, page: int = 1, page_size: int = 20):
    """Get tasks by space token with pagination"""
    url = f'https://unpod.dev/api/v2/platform/spaces/{space_token}/tasks/'
    params = {'page': page, 'page_size': page_size}
    response = requests.get(url, headers=headers, params=params)
    data = response.json()
    print(f"Total tasks: {data['count']}")
    return data['data']

def create_task(space_token: str, pilot: str, documents: list, context: str):
    """Create a task in a space"""
    url = f'https://unpod.dev/api/v2/platform/spaces/{space_token}/tasks/'
    payload = {
        'pilot': pilot,
        'documents': documents,
        'context': context,
        'schedule': {'type': 'now'}
    }
    response = requests.post(url, headers=headers, json=payload)
    data = response.json()
    print(f"Task created: {data['data']['run_id']}")
    return data['data']

# Example usage
get_tasks_by_agent('sales-agent-v1')
```

```bash cURL
# Get tasks by agent handle
curl -X GET "https://unpod.dev/api/v2/platform/agents/sales-agent-v1/tasks/" \
  -H "Authorization: Token your-api-token" \
  -H "Content-Type: application/json"

# Get tasks by space token with pagination
curl -X GET "https://unpod.dev/api/v2/platform/spaces/your-space-token/tasks/?page=1&page_size=20" \
  -H "Authorization: Token your-api-token" \
  -H "Content-Type: application/json"

# Create a task in a space
curl -X POST "https://unpod.dev/api/v2/platform/spaces/your-space-token/tasks/" \
  -H "Authorization: Token your-api-token" \
  -H "Content-Type: application/json" \
  -d '{
    "pilot": "sales-agent-v1",
    "documents": [
      {
        "name": "John Doe",
        "contact_number": "1234567890",
        "email": "john@example.com",
        "context": "Follow up call"
      }
    ],
    "context": "Call the lead and discuss project requirements.",
    "schedule": {"type": "now"}
  }'
```

</CodeGroup>

## Best Practices

1. **Pagination**: Use page and page_size parameters for efficient data retrieval
2. **Agent Handle**: Ensure you're using the correct agent handle for task assignment
3. **Document Fields**: Include all required document fields (name, contact_number)
4. **Error Handling**: Always handle potential errors and edge cases
5. **Security**: Keep API tokens secure and rotate them regularly
