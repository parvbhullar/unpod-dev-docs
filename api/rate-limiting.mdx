# Rate Limiting

To ensure fair usage and maintain optimal performance for all users, Unpod implements rate limits on its API endpoints.

## Rate Limits

| Plan          | Requests per Minute | Requests per Day |
|---------------|---------------------|------------------|
| Free          | 100                 | 10,000           |
| Developer     | 1,000               | 100,000          |
| Business      | 10,000              | 1,000,000        |
| Enterprise    | Custom              | Custom           |

## Headers

All API responses include rate limit headers:

- `X-RateLimit-Limit`: Maximum number of requests allowed in the current period
- `X-RateLimit-Remaining`: Number of requests remaining in the current period
- `X-RateLimit-Reset`: Unix timestamp when the current rate limit window resets
- `Retry-After`: Number of seconds to wait before making another request (only when rate limited)

## Handling Rate Limits

When you exceed the rate limit, the API will respond with a `429 Too Many Requests` status code. The response will include a `Retry-After` header indicating how long to wait before making another request.

### Example Response

```http
HTTP/1.1 429 Too Many Requests
Content-Type: application/json
Retry-After: 60
X-RateLimit-Limit: 100
X-RateLimit-Remaining: 0
X-RateLimit-Reset: 1614556800

{
  "error": {
    "code": "rate_limit_exceeded",
    "message": "Rate limit exceeded. Please try again in 60 seconds."
  }
}
```

## Best Practices

1. **Implement Exponential Backoff**: If you hit a rate limit, wait before retrying with increasing delays.
2. **Cache Responses**: Cache frequently accessed data to reduce the number of API calls.
3. **Batch Requests**: Combine multiple operations into a single request when possible.
4. **Monitor Usage**: Keep track of your API usage using the rate limit headers.

## Increasing Your Limits

To request higher rate limits:

1. Upgrade your plan in the [Unpod Dashboard](https://app.unpod.dev/billing)
2. Contact support at support@unpod.dev for custom Enterprise plans

## Example: Implementing Exponential Backoff

```javascript
async function makeRequestWithRetry(url, options = {}, retries = 3, backoff = 1000) {
  try {
    const response = await fetch(url, options);
    
    // If rate limited, retry after delay
    if (response.status === 429) {
      const retryAfter = response.headers.get('Retry-After') || 1;
      if (retries > 0) {
        await new Promise(resolve => setTimeout(resolve, retryAfter * 1000));
        return makeRequestWithRetry(url, options, retries - 1, backoff * 2);
      }
    }
    
    return response;
  } catch (error) {
    if (retries > 0) {
      await new Promise(resolve => setTimeout(resolve, backoff));
      return makeRequestWithRetry(url, options, retries - 1, backoff * 2);
    }
    throw error;
  }
}
```
